{"version":3,"file":"forum.js","mappings":"MACA,IAAIA,EAAsB,CCA1BA,EAAyBC,IACxB,IAAIC,EAASD,GAAUA,EAAOE,WAC7B,IAAOF,EAAiB,QACxB,IAAM,EAEP,OADAD,EAAoBI,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,CAAM,ECLdF,EAAwB,CAACM,EAASC,KACjC,IAAI,IAAIC,KAAOD,EACXP,EAAoBS,EAAEF,EAAYC,KAASR,EAAoBS,EAAEH,EAASE,IAC5EE,OAAOC,eAAeL,EAASE,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,IAE1E,ECNDR,EAAwB,CAACc,EAAKC,IAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,EAAKC,GCClFf,EAAyBM,IACH,oBAAXa,QAA0BA,OAAOC,aAC1CV,OAAOC,eAAeL,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DX,OAAOC,eAAeL,EAAS,aAAc,CAAEe,OAAO,GAAO,G,+BCL9D,MAAM,EAA+BC,OAAOC,KAAKC,OAAO,iBCAlD,EAA+BF,OAAOC,KAAKC,OAAO,c,aCAzC,SAASC,EAAgBhB,EAAGiB,GAKzC,OAJAD,EAAkBf,OAAOiB,eAAiBjB,OAAOiB,eAAeC,OAAS,SAAyBnB,EAAGiB,GAEnG,OADAjB,EAAEoB,UAAYH,EACPjB,CACT,EACOgB,EAAgBhB,EAAGiB,EAC5B,CCNA,MAAM,EAA+BJ,OAAOC,KAAKC,OAAO,4B,aCAxD,MAAM,EAA+BF,OAAOC,KAAKC,OAAO,6B,aCUnCM,EAAgB,SAAAC,GCTtB,IAAwBC,EAAUC,EDSZ,SAAAH,IAAA,OAAAC,EAAAG,MAAA,KAAAC,YAAA,KAoBlC,OC7B8CF,EDSZF,GCTEC,EDSFF,GCR1Bd,UAAYN,OAAO0B,OAAOH,EAAWjB,WAC9CgB,EAAShB,UAAUqB,YAAcL,EACjCL,EAAeK,EAAUC,GDMUH,EAAAd,UACnCsB,KAAA,SAAKC,GACH,IAAMC,EAAYT,EAAAf,UAASsB,KAAIpB,KAAC,KAAAqB,GAG1BE,EAAcC,KAAKC,MAAMF,aAAeD,EAAaG,MAAMC,MAGjE,cAFOJ,EAAaG,MAAMC,MAGxBC,EAACC,IAAO,CAACC,aAAa,EAAOC,KAAMP,GAChCD,EAGP,EAACV,EAEMmB,UAAP,SAAiBN,GACfZ,EAAMkB,UAAS/B,KAAC,KAAAyB,GAEhBA,EAAMO,UAAY,kDAClBP,EAAMF,YAAcE,EAAMC,KAC5B,EAACd,CAAA,CApBkC,CAASqB,KEV9C,MAAM,EAA+B7B,OAAOC,KAAKC,OAAO,gC,aCMxD4B,IAAAA,aAAiBC,IACf,+BACA,YACEC,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,UAAU,WACrCb,KAAKc,gBAAiB,EACtBd,KAAKe,iBAAmB,KACxBf,KAAKgB,kBAAoB,IAC3B,KAEAJ,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,gBAAgB,SAAUI,GAAO,IAAAC,EAAA,KAC5DD,EAAME,OAAO,SACbF,EAAME,OAAO,YACbF,EAAME,OAAO,SACbF,EAAMN,IACJ,UACAvB,EAAiBgC,UAAU,CACzBC,QAAS,SAACC,GACRA,EAAMC,iBAGDL,EAAKH,mBACRG,EAAKM,yBACLN,EAAKO,mBAGFP,EAAKJ,gBAKRI,EAAKJ,gBAAiB,EACtBI,EAAKQ,uBACLvB,EAAEwB,WANAT,EAAKU,uBACLV,EAAKJ,gBAAiB,EACtBX,EAAEwB,SAMR,EACAE,KAAM,oBACN3B,MAAOQ,IAAAA,WAAeoB,MAAM,gDAGlC,KAEAlB,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,YAAY,WACnCb,KAAKe,kBACPf,KAAKe,iBAAiBI,QAE1B,KAEAP,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,0BAA0B,WACrDb,KAAKe,iBAAmBgB,SAASC,cAAc,OAC/ChC,KAAKe,iBAAiBkB,UAAUtB,IAAI,iCACpCX,KAAKgB,kBAAoBkB,EAAElC,KAAKe,kBAChCgB,SAASI,KAAKC,YAAYpC,KAAKe,iBACjC,KAEAH,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,mBAAmB,WAAY,IAAAwB,EAAA,KAC1D3B,IAAAA,QACW,CACP4B,OAAQ,MACRC,IAAK7B,IAAAA,MAAU8B,UAAU,UAAY,qBAEtCC,MAAK,SAACC,GACL,IAAMC,EAAUjC,IAAAA,MAAU8B,UAAU,WAC9BI,EAAe,GAErBF,EAAe,KAAEG,SAAQ,SAACC,GACxB,ICrEuBP,EAC3BQ,EDoEUC,EAAOF,EAAwB,WAAQ,KAE7CF,EAAaK,KAAK,CAChBC,KAAMJ,EAAwB,WAAS,MACvCK,cAAeL,EAAwB,WAAmB,gBAC1DM,OC1EqBb,ED0EHS,ECzExBD,EAAQ,IAAIM,OAAO,mBAAoB,KAEzCd,EAAIe,MAAMP,GDuEwBC,EAAOL,EAAUK,GAC3CO,SAAUT,EAAwB,WAAY,SAC9CU,cAAeV,EAAwB,WAAiB,eAE5D,IAEA,IAAMW,EAAoBb,EAAac,QAAO,SAACC,EAAQP,GAErD,OADCO,EAAOP,EAAMG,UAAYI,EAAOP,EAAMG,WAAa,IAAIN,KAAKG,GACtDO,CACT,GAAG,CAAC,GAEEC,EAAiB7B,SAASC,cAAc,OAC9C4B,EAAe3B,UAAUtB,IAAI,yBAC7B0B,EAAKtB,iBAAiBqB,YAAYwB,GAElC,IAAMC,EAAkB9B,SAASC,cAAc,OAC/C4B,EAAexB,YAAYyB,GAE3B,IAAMC,EAAqB/B,SAASC,cAAc,OAClD8B,EAAmB7B,UAAUtB,IAAI,gBACjCmD,EAAmBC,MAAMC,UAAY,QACrCF,EAAmBC,MAAME,UAAY,OACrCL,EAAexB,YAAY0B,GAE3B,IAAMI,EAASnC,SAASC,cAAc,OACtCkC,EAAOjC,UAAUtB,IAAI,mBACrBkD,EAAgBzB,YAAY8B,GAC5BlG,OAAOmG,KAAKV,GAAmBZ,SAAQ,SAACU,EAASa,GAC/C,IAAMC,EAAYtC,SAASC,cAAc,UACnCwB,EAAgBC,EAAkBF,GAAU,GAAGC,cACrDa,EAAUC,YAAcd,EACxBa,EAAUE,QAAQC,WAAajB,EAEjB,IAAVa,GACFC,EAAUpC,UAAUtB,IAAI,UAG1B0D,EAAUI,iBAAiB,SAAS,WAElCP,EAAOQ,iBAAiB,UAAU7B,SAAQ,SAAC8B,GACzCA,EAAO1C,UAAUd,OAAO,SAC1B,IAEAkD,EAAUpC,UAAUtB,IAAI,UACxBiE,EAAWnB,EAAkBF,GAC/B,IACAW,EAAO9B,YAAYiC,EACrB,IAEA,IAAMO,EAAa,SAACC,GAClBf,EAAmBgB,UAAY,GAC/BD,EAAQhC,SAAQ,SAACO,GACf,IAAMQ,EAAiB7B,SAASC,cAAc,QAC9C4B,EAAepD,UAAY,UAE3B,IAAMuE,EAAehD,SAASC,cAAc,OAC5C+C,EAAaC,IAAM5B,EAAMA,MACzB2B,EAAa7E,MAAQkD,EAAMF,KAC3B6B,EAAaE,IAAM7B,EAAMF,KACzB6B,EAAahB,MAAMmB,OAAS,UAE5BH,EAAaN,iBAAiB,SAAS,WACrCpC,EAAKpC,MAAMkF,SAASC,OAAOC,eAAejC,EAAMD,eAChDd,EAAKvB,gBAAiB,EACtBuB,EAAKX,sBACP,IAEAkC,EAAexB,YAAY2C,GAC3BjB,EAAmB1B,YAAYwB,EACjC,GACF,EACM0B,EAAkBtH,OAAOmG,KAAKV,GAAmB,GACvDmB,EAAWnB,EAAkB6B,IAW7B,IAAMC,EAAgBxD,SAASyD,cAAc,mBAG7C,GAAID,EAAe,CAEjB,IAAME,EAAoBF,EAAcG,wBAElCC,EAAWC,OAAOC,YAAc,IAEhCC,EAAsBH,EAAW,MAAWF,EAAkBM,IAAM1D,EAAKtB,iBAAiBiF,aAAY,KACtGC,EAAuBN,EAAW,MAAWF,EAAkBS,MAAQT,EAAkBU,MAAQ9D,EAAKtB,iBAAiBqF,aAAe,EAAC,KAC7I/D,EAAKrB,kBAAkBqF,IAAI,CACzBC,SAAU,QACVP,IAAK,GAAGD,EACRI,KAAM,GAAGD,EACTM,UAAWZ,EAAW,wBAA0B,GAChDQ,MAAOR,EAAW,MAAQ,GAC1Ba,OAAQb,EAAW,OAAS,IAEhC,CAKAtD,EAAKrB,kBAAkByF,GAAG,aAAa,SAACC,GACtCA,EAAEC,iBACJ,IAEAzE,EAAEH,UAAU0E,GAAG,aAAa,SAACC,GAC3BE,QAAQC,IAAI,OAAQxE,EAAKvB,iBAEtBuB,EAAKrB,kBAAkB8F,GAAGJ,EAAEK,SAC7B1E,EAAKvB,iBAELuB,EAAKvB,gBAAiB,EACtBuB,EAAKX,uBACLvB,EAAEwB,SAEN,GACF,GACJ,KAEAf,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,wBAAwB,WAGnDb,KAAKgB,kBAAkBqF,IAAI,CACzBW,WAAY,WAEhB,KAEApG,EAAAA,EAAAA,QAAOC,IAAAA,UAAsB,wBAAwB,WAGnDb,KAAKgB,kBAAkBqF,IAAI,CACzBW,WAAY,UAEhB,GACF,IACC,I","sources":["webpack://@nodeloc/flarum-ext-my-emoji/webpack/bootstrap","webpack://@nodeloc/flarum-ext-my-emoji/webpack/runtime/compat get default export","webpack://@nodeloc/flarum-ext-my-emoji/webpack/runtime/define property getters","webpack://@nodeloc/flarum-ext-my-emoji/webpack/runtime/hasOwnProperty shorthand","webpack://@nodeloc/flarum-ext-my-emoji/webpack/runtime/make namespace object","webpack://@nodeloc/flarum-ext-my-emoji/external root \"flarum.core.compat['common/extend']\"","webpack://@nodeloc/flarum-ext-my-emoji/external root \"flarum.core.compat['common/app']\"","webpack://@nodeloc/flarum-ext-my-emoji/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nodeloc/flarum-ext-my-emoji/external root \"flarum.core.compat['common/components/Button']\"","webpack://@nodeloc/flarum-ext-my-emoji/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@nodeloc/flarum-ext-my-emoji/./src/forum/components/TextEditorButton.js","webpack://@nodeloc/flarum-ext-my-emoji/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nodeloc/flarum-ext-my-emoji/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@nodeloc/flarum-ext-my-emoji/./src/forum/index.js","webpack://@nodeloc/flarum-ext-my-emoji/./src/common/utils/urlChecker.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import Button from 'flarum/common/components/Button';\r\nimport Tooltip from 'flarum/common/components/Tooltip';\r\n\r\n/**\r\n * The `TextEditorButton` component displays a button suitable for the text\r\n * editor toolbar.\r\n *\r\n * So this class is only here because of\r\n * to set `showOnFocus={false}` on the tooltip.\r\n */\r\nexport default class TextEditorButton extends Button {\r\n  view(vnode) {\r\n    const originalView = super.view(vnode);\r\n\r\n    // Steal tooltip label from the Button superclass\r\n    const tooltipText = this.attrs.tooltipText || originalView.attrs.title;\r\n    delete originalView.attrs.title;\r\n\r\n    return (\r\n      <Tooltip showOnFocus={false} text={tooltipText}>\r\n        {originalView}\r\n      </Tooltip>\r\n    );\r\n  }\r\n\r\n  static initAttrs(attrs) {\r\n    super.initAttrs(attrs);\r\n\r\n    attrs.className = 'Button Button--icon Button--link Button-MyEmoji';\r\n    attrs.tooltipText = attrs.title;\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/common/app';\nimport TextEditorButton from './components/TextEditorButton';\nimport TextEditor from 'flarum/common/components/TextEditor';\nimport urlChecker from '../common/utils/urlChecker';\n\napp.initializers.add(\n  'nodeloc-flarum-ext-my-emoji',\n  () => {\n    extend(TextEditor.prototype, 'oninit', function () {\n      this.isPickerLoaded = false;\n      this.MyEmojiContainer = null;\n      this.$MyEmojiContainer = null;\n    });\n\n    extend(TextEditor.prototype, 'toolbarItems', function (items) {\n      items.remove('emoji');\n      items.remove('mentions');\n      items.remove('emoji');\n      items.add(\n        'MyEmoji',\n        TextEditorButton.component({\n          onclick: (event) => {\n            event.preventDefault();\n\n            // 检查 MyEmojiContainer 是否已经创建\n            if (!this.MyEmojiContainer) {\n              this.createMyEmojiContainer();\n              this.loadMyEmojiData();  // 仅在第一次创建容器时加载 MyEmoji 数据\n            }\n\n            if (!this.isPickerLoaded) {\n                this.showMyEmojiContainer();\n                this.isPickerLoaded = true;\n                m.redraw();\n            } else {\n              this.isPickerLoaded = false;\n              this.hideMyEmojiContainer();\n              m.redraw();\n            }\n          },\n          icon: 'far fa-smile-wink',\n          title: app.translator.trans('nodeloc-emoji.forum.composer.emoji_tooltip'),\n        })\n      );\n    });\n\n    extend(TextEditor.prototype, 'onremove', function () {\n      if (this.MyEmojiContainer) {\n        this.MyEmojiContainer.remove();\n      }\n    });\n\n    extend(TextEditor.prototype, 'createMyEmojiContainer', function () {\n      this.MyEmojiContainer = document.createElement('div');\n      this.MyEmojiContainer.classList.add('ComposerBody-MyEmojiContainer');\n      this.$MyEmojiContainer = $(this.MyEmojiContainer);\n      document.body.appendChild(this.MyEmojiContainer);\n    });\n\n    extend(TextEditor.prototype, 'loadMyEmojiData', function () {\n      app\n        .request({\n          method: 'GET',\n          url: app.forum.attribute('apiUrl') + '/nodeloc/myemoji',\n        })\n        .then((response) => {\n          const baseUrl = app.forum.attribute('baseUrl');\n          const customEmojis = [];\n\n          response['data'].forEach((customEmoji) => {\n            const path = customEmoji['attributes']['path'];\n\n            customEmojis.push({\n              name: customEmoji['attributes']['title'],\n              textToReplace: customEmoji['attributes']['text_to_replace'],\n              emoji: urlChecker(path) ? path : baseUrl + path,\n              category: customEmoji['attributes']['category'],\n              category_name: customEmoji['attributes']['category_name'],\n            });\n          });\n\n          const myemojiByCategory = customEmojis.reduce((result, emoji) => {\n            (result[emoji.category] = result[emoji.category] || []).push(emoji);\n            return result;\n          }, {});\n\n          const emojiContainer = document.createElement('div');\n          emojiContainer.classList.add('emoji-picker__wrapper');\n          this.MyEmojiContainer.appendChild(emojiContainer);\n\n          const tabBarContainer = document.createElement('div');\n          emojiContainer.appendChild(tabBarContainer);\n\n          const emojiPickerWrapper = document.createElement('div');\n          emojiPickerWrapper.classList.add('emoji-picker');\n          emojiPickerWrapper.style.maxHeight = '300px'; // 适当调整高度\n          emojiPickerWrapper.style.overflowY = 'auto'; // 启用垂直滚动条\n          emojiContainer.appendChild(emojiPickerWrapper);\n\n          const tabBar = document.createElement('div');\n          tabBar.classList.add('MyEmoji-tab-bar');\n          tabBarContainer.appendChild(tabBar);\n          Object.keys(myemojiByCategory).forEach((category,index) => {\n            const tabButton = document.createElement('button');\n            const category_name = myemojiByCategory[category][0].category_name; // 获取第一个 emoji 的 category_name\n            tabButton.textContent = category_name; // 使用 category_name\n            tabButton.dataset.categoryId = category; // 存储分类 ID\n            // 如果是第一个按钮，添加 active 类\n            if (index === 0) {\n              tabButton.classList.add('active');\n            }\n\n            tabButton.addEventListener('click', () => {\n              // 先移除所有按钮的 active 类\n              tabBar.querySelectorAll('button').forEach((button) => {\n                button.classList.remove('active');\n              });\n              // 添加 active 类到当前点击的按钮\n              tabButton.classList.add('active');\n              showEmojis(myemojiByCategory[category]);\n            });\n            tabBar.appendChild(tabButton);\n          });\n\n          const showEmojis = (myemoji) => {\n            emojiPickerWrapper.innerHTML = '';\n            myemoji.forEach((emoji) => {\n              const emojiContainer = document.createElement('span');\n              emojiContainer.className = 'MyEmoji'; // 在 span 中添加 MyEmoji 类\n\n              const emojiElement = document.createElement('img');\n              emojiElement.src = emoji.emoji;\n              emojiElement.title = emoji.name;\n              emojiElement.alt = emoji.name;\n              emojiElement.style.cursor = 'pointer';\n\n              emojiElement.addEventListener('click', () => {\n                this.attrs.composer.editor.insertAtCursor(emoji.textToReplace);\n                this.isPickerLoaded = false;\n                this.hideMyEmojiContainer();\n              });\n\n              emojiContainer.appendChild(emojiElement);\n              emojiPickerWrapper.appendChild(emojiContainer);\n            });\n          };\n          const defaultCategory = Object.keys(myemojiByCategory)[0];\n          showEmojis(myemojiByCategory[defaultCategory]);\n\n          // const desiredPosition = 'translate(-50%, -50%)';  // 将 picker 居中\n          // this.$MyEmojiContainer.css({\n          //   position: 'fixed',  // 使用 fixed 定位以进行居中\n          //   top: '50%',\n          //   left: '50%',\n          //   transform: desiredPosition,\n          // });\n          // 获取 MyEmoji 按钮的位置信息\n          // 获取 MyEmojiButton 元素\n          const MyEmojiButton = document.querySelector('.Button-MyEmoji');\n\n          // 确保 MyEmojiButton 存在\n          if (MyEmojiButton) {\n            // 获取 MyEmojiButton 的位置信息\n            const MyEmojiButtonRect = MyEmojiButton.getBoundingClientRect();\n            // 添加媒体查询，适应移动端\n            const isMobile = window.innerWidth <= 768; // 根据您的需要调整移动端的宽度阈值\n            // 计算 MyEmojiContainer 的位置\n            const MyEmojiContainerTop = isMobile ? '50%' : `${MyEmojiButtonRect.top - this.MyEmojiContainer.offsetHeight}px`;\n            const MyEmojiContainerLeft = isMobile ? '50%' : `${MyEmojiButtonRect.left + (MyEmojiButtonRect.width - this.MyEmojiContainer.offsetWidth) / 2}px`;\n            this.$MyEmojiContainer.css({\n              position: 'fixed',\n              top: `${MyEmojiContainerTop}`,\n              left: `${MyEmojiContainerLeft}`,\n              transform: isMobile ? 'translate(-50%, -50%)' : '', // 在移动端使其居中\n              width: isMobile ? '90%' : '', // 在移动端设置宽度为 90%\n              margin: isMobile ? 'auto' : '', // 在移动端上中左右居中\n            });\n          }\n\n\n\n          // 在点击外部时关闭 picker\n          this.$MyEmojiContainer.on('mousedown', (e) => {\n            e.stopPropagation();\n          });\n\n          $(document).on('mousedown', (e) => {\n            console.log(\"test\", this.isPickerLoaded);\n            if (\n              !this.$MyEmojiContainer.is(e.target) &&\n              this.isPickerLoaded\n            ) {\n              this.isPickerLoaded = false;\n              this.hideMyEmojiContainer();\n              m.redraw();\n            }\n          });\n        });\n    });\n\n    extend(TextEditor.prototype, 'showMyEmojiContainer', function () {\n      // 显示 MyEmoji 容器的逻辑\n      // 例如：\n      this.$MyEmojiContainer.css({\n        visibility: 'visible',\n      });\n    });\n\n    extend(TextEditor.prototype, 'hideMyEmojiContainer', function () {\n      // 隐藏 MyEmoji 容器的逻辑\n      // 例如：\n      this.$MyEmojiContainer.css({\n        visibility: 'hidden',\n      });\n    });\n  },\n  -150 // 在 flarum/emoji 之前初始化\n);\n","// JavaScript way to check if the path starts with http:// or https://\r\n// We're using a similar thing on the ConfigureTextFormatter.php\r\nexport default function urlChecker(url) {\r\n  const regex = new RegExp('^(http|https)://', 'i');\r\n\r\n  if (url.match(regex)) return true;\r\n\r\n  return false;\r\n}\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","TextEditorButton","_Button","subClass","superClass","apply","arguments","create","constructor","view","vnode","originalView","tooltipText","this","attrs","title","m","Tooltip","showOnFocus","text","initAttrs","className","Button","app","add","extend","TextEditor","isPickerLoaded","MyEmojiContainer","$MyEmojiContainer","items","_this","remove","component","onclick","event","preventDefault","createMyEmojiContainer","loadMyEmojiData","hideMyEmojiContainer","redraw","showMyEmojiContainer","icon","trans","document","createElement","classList","$","body","appendChild","_this2","method","url","attribute","then","response","baseUrl","customEmojis","forEach","customEmoji","regex","path","push","name","textToReplace","emoji","RegExp","match","category","category_name","myemojiByCategory","reduce","result","emojiContainer","tabBarContainer","emojiPickerWrapper","style","maxHeight","overflowY","tabBar","keys","index","tabButton","textContent","dataset","categoryId","addEventListener","querySelectorAll","button","showEmojis","myemoji","innerHTML","emojiElement","src","alt","cursor","composer","editor","insertAtCursor","defaultCategory","MyEmojiButton","querySelector","MyEmojiButtonRect","getBoundingClientRect","isMobile","window","innerWidth","MyEmojiContainerTop","top","offsetHeight","MyEmojiContainerLeft","left","width","offsetWidth","css","position","transform","margin","on","e","stopPropagation","console","log","is","target","visibility"],"sourceRoot":""}